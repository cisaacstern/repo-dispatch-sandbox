name: run-command-slash-dispatch

on:
  repository_dispatch:
    types: [run-command]
    
env:
  PAYLOAD_CONTEXT: ${{ toJson(github.event.client_payload) }}

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - id: 'run-container'
        name: 'Pass PAYLOAD_CONTEXT to Dockerized click application to parse and run'
        run: |
          PAYLOAD_CONTEXT=$( cat <<EOF
          ${{ toJson(github.event.client_payload) }}
          EOF
          ) \
          && \
          docker run -i \
          -e PAYLOAD_CONTEXT \
          pangeo/pangeo-forge-registrar-images:latest \
          print-env \
